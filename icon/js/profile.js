var __awaiter=this&&this.__awaiter||function(o,r,a,d){return new(a||(a=Promise))(function(t,e){function i(t){try{s(d.next(t))}catch(t){e(t)}}function n(t){try{s(d.throw(t))}catch(t){e(t)}}function s(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(i,n)}s((d=d.apply(o,r||[])).next())})},__generator=this&&this.__generator||function(i,n){function t(e){return function(t){return function(e){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,o&&(r=o[2&e[0]?"return":e[0]?"throw":"next"])&&!(r=r.call(o,e[1])).done)return r;switch(o=0,r&&(e=[0,r.value]),e[0]){case 0:case 1:r=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(r=0<(r=a.trys).length&&r[r.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!r||e[1]>r[0]&&e[1]<r[3])){a.label=e[1];break}if(6===e[0]&&a.label<r[1]){a.label=r[1],r=e;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(e);break}r[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(i,a)}catch(t){e=[6,t],o=0}finally{s=r=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}var s,o,r,e,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e},AddPositionSection=function(){function t(){var t=this;this.userId=localStorage.getItem("user"),this.onAddPositionPress=function(){t.getDataFromInputs(),(new List).addItemToList(t.titlePosition,t.desctiptioPosition,t.typePosition,t.coust,t.inputDate),t.clearInputs(),(new List).createCards()},this.addPositionButton=document.getElementById("add-position").addEventListener("click",this.onAddPositionPress)}return t.prototype.getDataFromInputs=function(){this.titlePosition=document.getElementById("title-position").value,this.desctiptioPosition=document.getElementById("description").value,this.typePosition=document.getElementById("type-position").value,this.inputDate=document.getElementById("date").value,this.coust=document.getElementById("coust").value,this.date=new Date(this.inputDate),this.date.toDateString()},t.prototype.clearInputs=function(){this.titlePosition=document.getElementById("title-position").value="",this.coust=document.getElementById("coust").value="",this.desctiptioPosition=document.getElementById("description").value="",this.typePosition=document.getElementById("type-position").value="Choose.."},t}(),List=function(){function t(){var e=this;this.userId=localStorage.getItem("user"),this.deleteCardInDatabase=function(t){firebase.database().ref("users/"+e.userId+"/listPosition/"+t).remove()},this.onFilterPress=function(){e.getParametersFromFilterPanel(),e.clearInputsInFilterSection()},this.onShowAllPress=function(){for(var t=0,e=Array.from(document.getElementsByClassName("wrapCard"));t<e.length;t++){e[t].style.display="flex"}},this.filterButton=document.getElementById("filter-btn").addEventListener("click",this.onFilterPress),this.showAllButton=document.getElementById("show-all").addEventListener("click",this.onShowAllPress)}return t.prototype.addItemToList=function(t,e,i,n,s){firebase.database().ref("users/"+this.userId+"/listPosition").push({title:t,description:e,type:i,date:s,coust:n})},t.prototype.getItemToList=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,firebase.database().ref("/users/"+this.userId+"/listPosition/").once("value")];case 1:return e=t.sent(),[2,e.val()]}})})},t.prototype.createCards=function(){var i,n,s,o,r,t=this.getItemToList();document.getElementById("cardList").innerHTML=" ",t.then(function(t){for(var e in t){i=t[e].title,n=t[e].description,s=t[e].type,o=t[e].coust,r=t[e].date;new Card(i,n,s,r,o,e)}})},t.prototype.getParametersFromFilterPanel=function(){var t=document.getElementById("dateFilterParameter").value,e=document.getElementById("typeFilterParameter").value;this.filterCardsInListSection(e,t)},t.prototype.clearInputsInFilterSection=function(){var t=document.getElementById("dateFilterParameter");document.getElementById("typeFilterParameter");t.value=""},t.prototype.filterCardsInListSection=function(t,e){for(var i=0,n=Array.from(document.getElementsByClassName("wrapCard"));i<n.length;i++){var s=n[i],o=s.getAttribute("type"),r=s.getAttribute("date");s.style.display=o==t&&r==e?"flex":"none"}},t}(),Profile=function(){this.singOutButton=document.getElementById("singOut"),this.singOut=function(){firebase.auth().signOut().then(function(){window.location.href="C:/Users/User/Desktop/CostCount/index.html"}).catch(function(t){console.log(t)})},this.singOutButton.addEventListener("click",this.singOut)},Card=function(){function t(t,e,i,n,s,o){var r=this;this.divWrap=document.getElementById("cardList"),this.divCard=document.createElement("div"),this.divCardBody=document.createElement("div"),this.cardTitle=document.createElement("h5"),this.cardDescription=document.createElement("p"),this.listGrup=document.createElement("ul"),this.type=document.createElement("li"),this.date=document.createElement("li"),this.coust=document.createElement("li"),this.divCardBody2=document.createElement("div"),this.buttonDelete=document.createElement("button"),this.userId=localStorage.getItem("user"),this.onDeletePressed=function(){var t=new List;r.removeCardFromUI(r.buttonDelete.id),t.deleteCardInDatabase(r.buttonDelete.id)},this.buildCardHTML(),this.cardTitle.innerHTML=t,this.cardDescription.innerHTML=e,this.type.innerHTML="Type: "+i,this.date.innerHTML="Date: "+n,this.coust.innerHTML="Coust: "+s,this.buttonDelete.id=o,this.divCard.id=o,this.divCard.setAttribute("date",n),this.divCard.setAttribute("type",i)}return t.prototype.buildCardHTML=function(){this.divWrap.appendChild(this.divCard),this.divCard.className="card wrapCard",this.divCardBody.className="card-body",this.divCard.appendChild(this.divCardBody),this.divCard.appendChild(this.listGrup),this.listGrup.className="list-group list-group-flush",this.divCard.appendChild(this.divCardBody2),this.cardTitle.className="card-title",this.cardDescription.className="card-text",this.divCardBody.appendChild(this.cardTitle),this.divCardBody.appendChild(this.cardDescription),this.listGrup.appendChild(this.type),this.listGrup.appendChild(this.date),this.listGrup.appendChild(this.coust),this.type.className="list-group-item",this.date.className="list-group-item",this.coust.className="list-group-item",this.divCardBody2.className="card-body card-button-wrap",this.divCardBody2.appendChild(this.buttonDelete),this.buttonDelete.className="btn btn-link delete",this.buttonDelete.type="button",this.buttonDelete.innerHTML="Delete",this.buttonDelete.addEventListener("click",this.onDeletePressed)},t.prototype.removeCardFromUI=function(t){document.getElementById(t).remove()},t}();window.onload=function(){new AddPositionSection,new Profile;(new List).createCards()};